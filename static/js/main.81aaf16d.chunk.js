(this["webpackJsonpfamily-binary-tree"]=this["webpackJsonpfamily-binary-tree"]||[]).push([[0],{19:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var i=n(1),s=n.n(i),r=n(13),l=n.n(r),c=n(2),a=n(3),o=n(5),d=n(4),u=n(8),h=n(0),j=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props;e.parent,e.side,e.allUsers;return Object(h.jsx)("li",{children:Object(h.jsx)("div",{className:"a-substitute",children:Object(h.jsx)("div",{className:"distributor-wrap",children:Object(h.jsx)("div",{className:"avatar",style:{borderRadius:0}})})})})}}]),n}(s.a.Component),b=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(h.jsx)("li",{className:"missing",children:Object(h.jsx)("div",{className:"a-substitute",children:Object(h.jsx)("div",{className:"distributor-wrap",children:Object(h.jsx)("div",{className:"avatar"})})})})}}]),n}(s.a.Component),f=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,i=e.allUsers,s=e.deep,r=e.maxDeep,l=void 0===r?4:r,c=e.renderDetail,a=e.renderNode,o=e.onClick,d=e.colorText,u=void 0===d?"#333":d,f=e.imageFake,m=void 0===f?"https://i.imgur.com/AFj9jns.png":f,p=e.nameFake,v=void 0===p?"Null":p,g=e.toggleContextMenu,x=t?i.find((function(e){return e.id===t.left_child_id})):null,O=t?i.find((function(e){return e.id===t.right_child_id})):null;var y=t?"user":"missing";return Object(h.jsx)("li",{className:y,children:Object(h.jsxs)("div",{children:[u&&t&&Object(h.jsxs)("a",{onClick:function(){o&&o(t.id)},onContextMenu:function(e){e.preventDefault(),g(t,e)},href:"javascript:void(0)",children:[a?a(t):Object(h.jsxs)("div",{className:"distributor-wrap",children:[Object(h.jsx)("div",{className:"avatar",children:Object(h.jsx)("img",{src:t.image})}),Object(h.jsx)("span",{className:"name",style:{color:u},children:t.username})]}),Object(h.jsxs)("div",{className:"distributor-details",children:[c?c(t):Object(h.jsxs)("div",{className:"details-wrap",children:[Object(h.jsx)("div",{className:"details-title",children:"Details In RenderDetail"}),Object(h.jsxs)("div",{className:"details-row",children:[Object(h.jsx)("div",{className:"label",children:"NAME"}),Object(h.jsx)("div",{className:"value",children:t.username})]})]}),Object(h.jsx)("div",{className:"horizontal-line"})," ",Object(h.jsx)("div",{className:"sloping-line"})]})]}),s<l&&(x||O)&&Object(h.jsxs)("ul",{style:{position:"relative"},children:[x?Object(h.jsx)(n,{deep:s+1,maxDeep:l,allUsers:i,user:x,renderDetail:c,renderNode:a,onClick:o,colorText:u,imageFake:m,nameFake:v,toggleContextMenu:g}):t.edit?Object(h.jsx)(j,{parent:t,side:!1,allUsers:i}):Object(h.jsx)(b,{}),O?Object(h.jsx)(n,{deep:s+1,maxDeep:l,allUsers:i,renderDetail:c,renderNode:a,user:O,onClick:o,colorText:u,imageFake:m,nameFake:v,toggleContextMenu:g}):t.edit?Object(h.jsx)(j,{parent:t,side:!0,allUsers:i}):Object(h.jsx)(b,{}),Object(h.jsx)("div",{className:"arrow-up"})]})]})})}}]),n}(s.a.Component),m=(n(19),n(7)),p=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.show,n=e.user,i=e.close,s=e.edit,r=e.toggleEdit,l=e.applyChange,c=e.onFileUploadChange;return Object(h.jsxs)("div",{className:"distributor-details-modal",style:{display:t?"block":"none"},children:[Object(h.jsxs)("div",{className:"distributor-details-modal-img-div",children:[Object(h.jsx)("input",{id:"input-image",type:"file",onChange:function(e){console.log("onChange"),c(e)}}),Object(h.jsx)("label",{for:"input-image",children:Object(h.jsx)("img",{src:n?n.image:""})})]}),Object(h.jsxs)("div",{className:"distributor-details-modal-field",children:[Object(h.jsx)("label",{children:Object(h.jsx)("b",{children:"Name"})}),s?Object(h.jsx)("input",{id:"input-username",type:"text",className:"input",defaultValue:n?n.username:"",onKeyPress:function(e){return l(e)}}):Object(h.jsx)("div",{className:"value",children:n?n.username:""}),!s&&Object(h.jsx)("button",{className:"edit-button",onClick:r,children:Object(h.jsx)(m.e,{})})]}),Object(h.jsx)("div",{className:"close-modal",children:Object(h.jsx)("button",{onClick:i,children:"Close"})})]})}}]),n}(s.a.Component),v=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.bgSideBar,n=(e.colorSideBar,e.displayLevel),i=e.numLevels,s=e.goToLevel;return Object(h.jsx)("div",{className:"leftSidebar",children:Object(h.jsx)("div",{className:"levels-wrap",children:Object(u.a)(Array(i).keys()).map((function(e){return Object(h.jsx)("div",{className:"level",style:{backgroundColor:t,height:100/i+"%"},onClick:function(){s(n+e)},children:Object(h.jsxs)("span",{className:"level-label",children:["Level ",n+e]})},e)}))})})}}]),n}(s.a.Component),g=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.show,n=e.focusUser,i=e.addUser,s=e.toggleDetailsModalOn;return Object(h.jsx)("nav",{id:"context-menu",className:"context-menu",style:{display:t?"block":"none"},children:n&&Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{id:"context-menu__user",children:n.username}),Object(h.jsx)("div",{id:"context-menu__options",children:Object(h.jsxs)("ul",{className:"context-menu__items",children:[Object(h.jsx)("li",{className:"context-menu__item",children:Object(h.jsx)("button",{className:"context-menu__link",onClick:function(){s(n)},children:"View User"})}),Object(h.jsx)("li",{className:"context-menu__item",children:Object(h.jsx)("button",{className:"context-menu__link",disabled:null!==n.left_child_id,onClick:function(){i(n,"left_child_id")},children:"Add left leg"})}),Object(h.jsx)("li",{className:"context-menu__item",children:Object(h.jsx)("button",{className:"context-menu__link",disabled:null!==n.right_child_id,onClick:function(){i(n,"right_child_id")},children:"Add right leg"})})]})})]})})}}]),n}(s.a.Component),x=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.rootUser,e.selectedUser),n=e.selectedUserLevel,i=e.displayLevel,s=e.bgButton,r=e.colorButton,l=e.depth,c=e.goToTop,a=e.upOneLevel,o=e.downOneLevel,d=e.goToBottomLeft,u=e.goToBottomRight,j=e.searchUserHandler,b=e.goToLevelHandler;return Object(h.jsxs)("div",{className:"navigation",children:[Object(h.jsxs)("div",{style:{marginBottom:"5px"},children:[Object(h.jsx)("label",{children:"Go to user"}),Object(h.jsx)("input",{id:"searchUser",name:"searchUser",list:"usernames",onInput:j}),Object(h.jsx)("input",{type:"hidden",name:"searchUser",id:"searchUser-hidden"})]}),Object(h.jsxs)("div",{style:{marginBottom:"5px"},children:[Object(h.jsx)("label",{children:"Go to level"}),Object(h.jsx)("input",{id:"goToLevel",type:"number",min:"0",max:l-1,onChange:b})]}),Object(h.jsx)("div",{className:"buttons",children:Object(h.jsxs)("button",{type:"button",className:"button-tree",onClick:c,disabled:n+i===0,style:{backgroundColor:s,color:r},children:[Object(h.jsx)("i",{children:Object(h.jsx)(m.d,{})}),Object(h.jsx)("span",{className:"button-text",children:"Go to top"})]})}),Object(h.jsx)("div",{className:"buttons",children:Object(h.jsxs)("button",{type:"button",className:"button-tree",onClick:a,disabled:n+i===0,style:{backgroundColor:s,color:r},children:[Object(h.jsx)("i",{children:Object(h.jsx)(m.b,{})}),Object(h.jsx)("span",{className:"button-text",children:"Up one level"})]})}),Object(h.jsx)("div",{className:"buttons",children:Object(h.jsxs)("button",{type:"button",className:"button-tree",onClick:o,disabled:n>=l-1,style:{backgroundColor:s,color:r},children:[Object(h.jsx)("i",{children:Object(h.jsx)(m.a,{})}),Object(h.jsx)("span",{className:"button-text",children:"Down"})]})}),Object(h.jsxs)("div",{className:"buttons buttons-bottom",children:[Object(h.jsxs)("button",{className:"button-left button-tree",type:"button",onClick:d,disabled:!t.left_child_id,style:{backgroundColor:s,color:r},children:[Object(h.jsx)("i",{children:Object(h.jsx)(m.c,{})}),Object(h.jsx)("span",{className:"button-text",children:"Bottom left"})]}),Object(h.jsxs)("button",{className:"button-right button-tree",type:"primary",onClick:u,disabled:!t.right_child_id,style:{backgroundColor:s,color:r},children:[Object(h.jsx)("i",{children:Object(h.jsx)(m.c,{})}),Object(h.jsx)("span",{className:"button-text",children:"Bottom right"})]})]})]})}}]),n}(s.a.Component),O=n(6);function y(e,t,n){return t.filter((function(t){return n.some((function(n){return n in t&&t[n]===e}))})).map((function(e){return e.id}))}function _(e,t,n){var i,s=Object(O.a)(t);try{var r=function(){var t=i.value;if(t.id===e)return{v:n.filter((function(e){return e in t&&null!==t[e]})).map((function(e){return t[e]}))}};for(s.s();!(i=s.n()).done;){var l=r();if("object"===typeof l)return l.v}}catch(c){s.e(c)}finally{s.f()}}function U(e,t,n,i,s){var r=_(n,e,t);return r.includes(i)||r.some((function(r){return!s.includes(r)&&U(e,t,r,i,s.concat([n]))}))}function N(e,t,n,i){var s,r=Object(O.a)(t);try{var l=function(){var r=s.value;if(r.id===e)return{v:n.filter((function(e){return e in r&&null!==r[e]})).map((function(e){return i.includes(r[e])?[i.concat([r[e]])]:N(r[e],t,n,i.concat([r[e]]))})).flat()}};for(r.s();!(s=r.n()).done;){var c=l();if("object"===typeof c)return c.v}}catch(a){r.e(a)}finally{r.f()}}function k(e,t){return e.filter((function(n){return 0===y(n.id,e,t).length}))}function L(e,t){var n,i=[],s=Object(O.a)(e);try{for(s.s();!(n=s.n()).done;){var r=n.value;if(i.includes(r.id))throw'checkTree: node id "'.concat(r.id,'" occurs more than once');i.push(r.id)}}catch(m){s.e(m)}finally{s.f()}var l=k(e,t);if(0===l.length)throw"checkTree: graph has no root";if(l.length>1)throw"checkTree: graph has multiple roots: ".concat(l.map((function(e){return e.id})));var c,a=l[0],o=Object(O.a)(e);try{for(o.s();!(c=o.n()).done;){var d=c.value,u=y(d.id,e,t);if(u.length>1)throw"checkTree: node ".concat(d.id," has multiple parents: ").concat(u)}}catch(m){o.e(m)}finally{o.f()}var h=function(e,t){var n,i=[],s=Object(O.a)(e);try{for(s.s();!(n=s.n()).done;){var r,l=n.value,c=!1,a=Object(O.a)(i);try{for(a.s();!(r=a.n()).done;){var o,d=r.value,u=Object(O.a)(d);try{for(u.s();!(o=u.n()).done;){var h=o.value;if(l.id===h){c=!0;break}}}catch(m){u.e(m)}finally{u.f()}if(c)break}}catch(m){a.e(m)}finally{a.f()}c||(i=i.concat(N(l.id,e,t,[l.id])))}}catch(m){s.e(m)}finally{s.f()}return i}(e,t);if(h.length>0)throw"checkTree: graph contains cycles: ".concat(h);var j,b=Object(O.a)(e);try{for(b.s();!(j=b.n()).done;){var f=j.value;if(f.id!==a.id&&!U(e,t,a.id,f.id,[]))throw"checkTree: node ".concat(f.id," is disconnected from root")}}catch(m){b.e(m)}finally{b.f()}return!0}function C(e,t,n,i){if(i>t.length)throw"depth: termination check, current_depth ".concat(i," exceeds # of nodes in tree, ").concat(t.length);var s,r=Object(O.a)(t);try{var l=function(){var r=s.value;if(r.id===e)return{v:1+Math.max.apply(Math,Object(u.a)(n.map((function(e){return e in r&&null!==r[e]?C(r[e],t,n,i+1):0}))))}};for(r.s();!(s=r.n()).done;){var c=l();if("object"===typeof c)return c.v}}catch(a){r.e(a)}finally{r.f()}throw"depth: node id=".concat(e," not found in graph")}function w(e,t){if(0===e.length)return 0;var n=k(e,t);if(0===n.length)throw"depth: no root found";return Math.max.apply(Math,Object(u.a)(n.map((function(n){return C(n.id,e,t,0)}))))}function M(e,t,n,i){return 0===n?i:M(e,t,n-1,i.map((function(n){return _(n,e,t)})).flat())}var D=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),i=t.call(this,e),L(e.allUsers,["left_child_id","right_child_id"]),i.state={selectedUser:e.rootUser,selectedUserLevel:e.level,displayLevel:e.level,depth:w(e.allUsers,["left_child_id","right_child_id"]),showContextMenu:!1,showContextMenuEdit:!1,focusUser:null,showDetailsModal:!1,edit:!1},i}return Object(a.a)(n,[{key:"render",value:function(){var e,t,n,i,s=this,r=this.props,l=r.allUsers,c=void 0===l?[]:l,a=r.imageFake,o=r.nameFake,d=r.maxDeep,j=r.renderDetail,b=r.renderNode,m=(r.disableNavigation,r.disableSideBar,r.bgSideBar),O=void 0===m?"#00b6eb":m,y=r.colorSideBar,_=void 0===y?"#ffffff":y,U=r.colorText,N=r.bgButton,k=void 0===N?"#808285":N,L=r.colorButton,w=void 0===L?"#ffffff":L,D=(r.showContextMenu,this.props.rootUser),T=this.state.selectedUserLevel,B=(e=c,t=["left_child_id","right_child_id"],n=this.state.displayLevel-this.state.selectedUserLevel,i=this.state.selectedUser.id,M(e,t,n,[i])).map((function(e){return c.find((function(t){return t.id===e}))})),S=C(this.state.selectedUser.id,c,["left_child_id","right_child_id"],0),E=Math.min(d,S-(this.state.displayLevel-this.state.selectedUserLevel)),F=function(e){e<0||(e>=s.state.selectedUserLevel?s.setState({displayLevel:e}):function(){for(var t=s.state.selectedUser,n=s.state.selectedUserLevel-e;n>0;)t=s.props.allUsers.find((function(e){return e.left_child_id===t.id||e.right_child_id===t.id})),n--;s.setState({selectedUser:t,selectedUserLevel:e,displayLevel:e})}())},z=function(e){e&&function(){for(var t=-1,n=e;n;)n=s.props.allUsers.find((function(e){return e.left_child_id===n.id||e.right_child_id===n.id})),t++;s.setState({selectedUser:e,selectedUserLevel:t,displayLevel:t})}()},J=function(e){var t=c.find((function(t){return t.id===e}));z(t)},P=function(e){var t=document.querySelector("#context-menu"),n=function(e){var t=0,n=0;e||(e=window.event);return e.pageX||e.pageY?(t=e.pageX,n=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:t,y:n}}(e),i=n.x+"px",s=n.y+"px";t.style.left=i,t.style.top=s},A=function(e,t){P(t),s.setState({showContextMenu:!0,showContextMenuEdit:e.edit,focusUser:e}),document.onclick=I},I=function(){s.setState({showContextMenu:!1,showContextMenuEdit:!1}),document.onclick=null},R=function(e){s.setState({showDetailsModal:!0,focusUser:e,edit:!1})},H=function(){s.setState({edit:!0})},X=function(e){s.state.focusUser.image=e.target.result,s.forceUpdate()};return Object(h.jsxs)("div",{id:"binary-tree",className:"Treant",children:[w&&Object(h.jsx)(x,{rootUser:D,selectedUser:this.state.selectedUser,selectedUserLevel:this.state.selectedUserLevel,displayLevel:this.state.displayLevel,bgButton:k,colorButton:w,depth:this.state.depth,goToTop:function(){s.setState({selectedUser:s.props.rootUser,selectedUserLevel:0,displayLevel:0})},upOneLevel:function(){s.state.displayLevel>0&&s.setState({displayLevel:s.state.displayLevel-1})},downOneLevel:function(){s.state.displayLevel<S-1&&s.setState({displayLevel:s.state.displayLevel+1})},goToBottomLeft:function(){for(var e=D,t=T;e&&e.left_child_id;)e=c.find((function(t){return t.id===e.left_child_id})),t++;e&&s.setState({selectedUser:e,selectedUserLevel:t,displayLevel:t})},goToBottomRight:function(){for(var e=D,t=T;e&&e.right_child_id;)e=c.find((function(t){return t.id===e.right_child_id})),t++;e&&s.setState({selectedUser:e,selectedUserLevel:t,displayLevel:t})},searchUserHandler:function(e){var t=e.target,n=t.getAttribute("list"),i=document.querySelectorAll("#"+n+' option[value="'+t.value+'"]'),s=document.getElementById(t.getAttribute("id")+"-hidden");if(i.length>0){s.value=t.value,t.value=i[0].innerText;var r=c.find((function(e){return e.id===parseInt(s.value)}));z(r)}},goToLevelHandler:function(){var e=parseInt(document.getElementById("goToLevel").value);!isNaN(e)&&e<s.state.depth&&F(e)}}),_&&Object(h.jsx)(v,{bgSideBar:O,colorSideBar:_,displayLevel:this.state.displayLevel,numLevels:E,goToLevel:F}),Object(h.jsx)("div",{className:"tree",children:Object(h.jsx)("ul",{children:B.map((function(e){return Object(h.jsx)(f,{allUsers:c,user:e,deep:1,maxDeep:d,renderDetail:j,renderNode:b,onClick:J,colorText:U,imageFake:a,nameFake:o,toggleContextMenu:A},e.id)}))})}),Object(h.jsx)(g,{show:this.state.showContextMenu,focusUser:this.state.focusUser,addUser:function(e,t){var n=Math.max.apply(Math,Object(u.a)(c.map((function(e){return e.id}))))+1,i={id:n,left_child_id:null,right_child_id:null,username:"",image:"https://i.imgur.com/yzUDPMJ.png"};c.push(i),e[t]=n,R(i),H()},toggleDetailsModalOn:R}),Object(h.jsx)(p,{show:this.state.showDetailsModal,user:this.state.focusUser,close:function(){s.setState({showDetailsModal:!1,focusUser:null,edit:!1})},edit:this.state.edit,toggleEdit:H,applyChange:function(e){if(13===e.charCode){var t=document.getElementById("input-username").value;s.setState({edit:!1}),s.state.focusUser.username=t}},onFileUploadChange:function(e){var t=e.target.files[0],n=new FileReader;n.onload=X,n.readAsDataURL(t)}}),Object(h.jsx)("datalist",{id:"usernames",children:c.map((function(e){return Object(h.jsx)("option",{value:e.id,children:e.username},e.id)}))})]})}}]),n}(s.a.Component),T=(n(20),D),B=(n(21),[{id:1,left_child_id:2,right_child_id:3,username:"User 1",image:"https://i.imgur.com/yzUDPMJ.png"},{id:2,left_child_id:4,right_child_id:5,username:"User 2",image:"https://i.imgur.com/yzUDPMJ.png"},{id:3,left_child_id:6,right_child_id:null,properties:{username:"User 3"},image:"https://i.imgur.com/yzUDPMJ.png"},{id:4,left_child_id:7,right_child_id:8,username:"User 4",image:"https://i.imgur.com/yzUDPMJ.png"},{id:5,left_child_id:null,right_child_id:null,username:"User 5",image:"https://i.imgur.com/yzUDPMJ.png"},{id:6,left_child_id:null,right_child_id:null,username:"User 6",image:"https://i.imgur.com/yzUDPMJ.png",edit:!1},{id:7,left_child_id:9,right_child_id:null,username:"User 7",image:"https://i.imgur.com/yzUDPMJ.png"},{id:8,left_child_id:null,right_child_id:10,username:"User 8",image:"https://i.imgur.com/yzUDPMJ.png"},{id:9,left_child_id:null,right_child_id:null,username:"User 9",image:"https://i.imgur.com/yzUDPMJ.png"},{id:10,left_child_id:null,right_child_id:null,username:"User 10",image:"https://i.imgur.com/yzUDPMJ.png"}]);window.addEventListener("resize",(function(){var e=.01*window.innerWidth;document.documentElement.style.setProperty("--vw","".concat(e,"px"))}));var S=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"app",children:[Object(h.jsx)("h1",{children:"Demo Tree - By T\xf9ng V\u0169"}),Object(h.jsx)(T,{allUsers:B,rootUser:B[0],maxDeep:4,level:0,bgSideBar:"#333",colorText:"#333",colorSideBar:"#fff"})]})}}]),n}(s.a.Component);l.a.render(Object(h.jsx)(S,{}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.81aaf16d.chunk.js.map